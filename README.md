# 群辉NAS文件管理器

一个基于Python和tkinter开发的群辉NAS文件管理应用程序，支持通过群辉API进行文件浏览、上传等操作。
<img width="1202" height="832" alt="image" src="https://github.com/user-attachments/assets/d6f75f69-f4e2-4a5b-aa43-41968e0592eb" />
<img width="1370" height="918" alt="image" src="https://github.com/user-attachments/assets/16d5dfa2-c5f6-4f78-8c38-12ccfa3d5a0b" />


## 功能特性

- ✅ **自定义连接** - 支持自定义NAS地址、端口、用户名和密码
- ✅ **多用户配置** - 支持保存和快速切换多个NAS账户配置
- ✅ **记住密码** - 可选择记住登录信息，自动填入用户名密码
- ✅ **目录浏览** - 左侧显示共享文件夹目录结构
- ✅ **文件列表** - 右侧显示选中目录中的文件和文件夹
- ✅ **文件上传** - 支持文件上传功能，显示上传进度
- ✅ **文件下载** - 支持文件下载功能，带进度显示和保存位置选择
- ✅ **双击导航** - 双击文件夹可进入子目录
- ✅ **文件信息** - 显示文件大小、修改时间等详细信息
- ✅ **连接状态** - 实时显示连接状态和操作进度
- ✅ **错误处理** - 完善的错误提示和异常处理

## 支持的群辉版本

- 群辉NAS DSM 7.2.1
- 其他支持Synology FileStation API的版本

## 安装要求

- Python 3.7+
- tkinter (通常随Python自带)
- requests 库

## 快速开始

### 1. 克隆或下载项目

```bash
git clone <repository-url>
cd synology-nas-manager
```

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

### 3. 运行应用程序

```bash
python synology_nas_manager.py
```

## 使用说明

### 连接设置

#### 首次使用

1. **配置选择**: 在下拉框中选择 **"新建配置..."** 创建新的连接配置

2. **NAS地址**: 输入您的群辉NAS地址，格式如下：
   - HTTP: `http://192.168.1.100:5000`
   - HTTPS: `https://192.168.1.100:5001`
   - 外网地址: `http://your-domain.com:5000`

3. **用户名**: 输入您的群辉账户用户名

4. **密码**: 输入您的群辉账户密码

5. 勾选 **"记住配置"** 复选框（可选）

6. 点击 **"保存配置"** 按钮保存当前设置

7. 点击 **"连接"** 按钮进行登录

#### 后续使用

1. **配置选择**: 从下拉框中选择已保存的配置
2. 配置信息会自动填入，直接点击 **"连接"** 即可

### 文件浏览

- **左侧目录树**: 显示所有共享文件夹，点击文件夹查看其内容
- **右侧文件列表**: 显示当前目录下的文件和文件夹
- **双击文件夹**: 进入子目录
- **当前路径**: 顶部显示当前所在路径

### 文件上传

1. 在右侧文件列表区域，点击 **"上传文件"** 按钮
2. 选择要上传的本地文件
3. 系统会显示上传进度
4. 上传完成后自动刷新文件列表

### 文件下载

**方法一：使用下载按钮**
1. 在文件列表中选择要下载的文件
2. 点击 **"下载文件"** 按钮
3. 选择保存位置和文件名
4. 系统显示下载进度直到完成

**方法二：使用右键菜单**
1. 在文件列表中右键点击要下载的文件
2. 选择 **"下载"** 菜单项
3. 选择保存位置和文件名
4. 系统显示下载进度直到完成

> 注意：只能下载文件，不能下载文件夹

### 其他操作

- **刷新**: 点击 **"刷新"** 按钮更新当前目录的文件列表
- **断开连接**: 点击 **"断开"** 按钮安全退出登录
### 配置管理

- **保存配置**: 点击 **"保存配置"** 按钮保存当前连接信息
- **删除配置**: 点击 **"删除配置"** 按钮删除当前选择的配置
- **清除所有**: 点击 **"清除所有"** 按钮删除所有保存的配置

### 多用户支持

- **多配置保存**: 支持保存多个NAS账户的连接信息
- **快速切换**: 通过下拉框快速切换不同的NAS配置
- **独立配置**: 每个配置独立保存NAS地址、用户名和密码
- **记住密码**: 勾选后会将登录信息加密保存到本地
- **自动填充**: 选择配置后自动填入保存的登录信息
- **安全加密**: 密码使用Fernet加密算法保护，绑定当前机器和路径
- **智能保存**: 连接成功后自动保存配置，支持密码自动更新

### 界面优化

- **清晰布局**: 登录区域采用两行布局，第一行为登录信息，第二行为功能选项
- **状态显示**: 连接状态清晰显示在功能选项行
- **按钮布局**: 清除保存按钮位于右侧，与其他按钮对齐
- **响应式设计**: 界面元素根据窗口大小自动调整

## API接口说明

本应用使用以下群辉API接口：

- `SYNO.API.Info` - 获取API信息
- `SYNO.API.Auth` - 用户认证登录/登出
- `SYNO.FileStation.List` - 获取文件和文件夹列表
- `SYNO.FileStation.Upload` - 文件上传
- `SYNO.FileStation.Download` - 文件下载

## 界面预览

应用程序采用现代化的GUI设计：

- **顶部**: 连接设置区域（NAS地址、用户名、密码、连接按钮）
- **中间**: 分割面板布局
  - 左侧：目录树浏览器
  - 右侧：文件列表和工具栏（刷新、上传文件、下载文件按钮）
- **底部**: 状态栏（显示当前操作状态和进度条）

## 错误处理

应用程序包含完善的错误处理机制：

- **连接错误**: 网络连接失败、超时等
- **认证错误**: 用户名密码错误、权限不足等
- **文件操作错误**: 上传失败、路径不存在等
- **API错误**: 各种API调用错误的详细提示

## 技术特性

- **多线程操作**: 网络请求在后台线程执行，避免界面卡顿
- **进度显示**: 上传操作显示实时进度
- **状态管理**: 完整的连接状态和会话管理
- **安全登出**: 应用关闭时自动清理会话
- **配置持久化**: 登录信息安全保存，启动时自动加载

## 注意事项

1. **网络要求**: 确保您的计算机能够访问群辉NAS的IP地址和端口
2. **用户权限**: 登录用户需要有FileStation的访问权限
3. **防火墙**: 确保群辉NAS的FileStation API端口已开放
4. **HTTPS**: 如果使用HTTPS连接，请确认SSL证书配置正确

## 常见问题

### Q: 连接失败怎么办？
A: 检查以下项目：
- NAS地址和端口是否正确
- 网络连接是否正常
- 用户名和密码是否正确
- 群辉FileStation服务是否已启用

### Q: 上传失败怎么办？
A: 可能的原因：
- 目标目录没有写入权限
- 磁盘空间不足
- 文件名包含非法字符
- 网络连接中断

### Q: 支持哪些文件类型？
A: 支持上传任何类型的文件，没有格式限制。

## 开发信息

- **开发语言**: Python 3.7+
- **GUI框架**: tkinter
- **HTTP库**: requests
- **API版本**: Synology FileStation API v2/v3

## 许可证

此项目仅供学习和个人使用。

## 更新日志

### v1.0.0
- 初始版本发布
- 支持基本的文件浏览和上传功能
- 完整的群辉API集成
- 现代化的用户界面 
